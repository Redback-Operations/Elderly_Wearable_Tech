----------------------------------------------------------------------------------

Integration of Feature extraction Script to generate dataset for phase2:


This code is designed to analyze sleep data from a CSV file and calculate various sleep metrics based on the sleep stages recorded in the data. It processes the sleep stages classified into different categories (NoREM stages 1–4, REM, and wake periods) and provides insightful metrics about the sleep patterns of a subject. The key functions performed by this script are as follows:

Loading the Dataset:

The function calculate_sleep_metrics takes a CSV file as input and loads it into a pandas DataFrame. Each row in the dataset represents a 30-second segment, and the 'Class' column indicates the sleep stage for that segment.
Sleep Latency Calculation:

The code finds the first occurrence of "Class 6" (indicating wakefulness) and the first occurrence of sleep stages [1, 2, 3, 4] (indicating NoREM stages). It calculates the time difference between these two events to determine how long it took the subject to fall asleep (Sleep Latency).
Total Sleep Time Calculation:

The script loops through the dataset and calculates the total sleep time by summing up the duration of stages [1, 2, 3, 4, 5], each representing different sleep stages. The sleep duration is then printed in hours, minutes, and seconds.
Time Difference Between Sleep Stages:

The code also calculates the time difference between the first occurrence of REM sleep (Class 5) and the first occurrence of any NoREM stage [1, 2, 3, 4].
Stage-Specific Time Calculation:

It calculates the total time spent in each sleep stage (NoREM 1–4, REM) by iterating over the 'Class' column and summing up the duration of consecutive segments. This time is then converted into hours, minutes, and seconds and printed for each sleep stage.
Percentage of Sleep Stages:

After calculating the total sleep time and individual stage durations, the code calculates the percentage of time spent in each sleep stage relative to the total sleep time. The results are outputted for NoREM stages and REM.
Arousal Index Calculation:

The script counts the number of arousals (transitions to wakefulness or light sleep) during the sleep period. It calculates the arousal index, which represents the number of arousals per hour of sleep, indicating sleep fragmentation.
Return of Key Metrics:

Finally, the code returns a dictionary containing the extracted sleep metrics, such as sleep duration, sleep latency, percentages of time spent in each sleep stage, and the arousal index. These metrics are crucial for understanding sleep quality.
The code provides detailed insights into a subject's sleep by analyzing the transitions between different sleep stages and calculating key indicators of sleep health.

------------------------------------------------------------------------
Phase 2 - dataset generation from above script:

Phase 2's Dataset 2 is generated by processing sleep data from multiple subjects using the above code to extract key sleep metrics from each subject's individual dataset. The raw data for each subject is typically stored in separate CSV files, where each file represents sleep stage recordings over time. The code iterates through each dataset, calculates various sleep metrics such as total sleep duration, sleep latency, time spent in each sleep stage (NoREM 1-4, REM), percentages of these stages relative to total sleep time, and the Arousal Index (AI), which measures sleep disturbances.

These metrics are compiled for each subject, and the results are stored in a structured format, where each row corresponds to a subject and each column represents a different metric (e.g., sleep duration, percentage of REM sleep, Arousal Index). After processing all subjects' data, these individual metrics are consolidated into a single dataset, referred to as Dataset 2. This dataset serves as a comprehensive collection of sleep analysis results across all subjects and is ready for further analysis in Phase 2, such as sleep pattern evaluation or predictive modeling.

---------------------------------------------------------------------------